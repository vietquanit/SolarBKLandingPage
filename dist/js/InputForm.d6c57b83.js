"use strict";(self["webpackChunksolar_bk_landing_page"]=self["webpackChunksolar_bk_landing_page"]||[]).push([[204],{2842:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var s=a(3396),l=a(9242),o=a(7139);const n={class:"input-form container mx-auto"},i={class:"grid"},m={class:"col-12"},r={class:"field grid pt-4 mb-4"},u=(0,s._)("label",{for:"name-project",class:"col-10 mb-2 md:col-2 md:mb-0 font-semibold"},"Tên dự án: ",-1),d={class:"col-12 md:col-10"},c={key:0,class:"p-error text-left block pt-2"},p={class:"field grid"},h=(0,s._)("label",{for:"name-customer",class:"col-10 mb-2 md:col-2 md:mb-0 font-semibold"},"Tên khách hàng: ",-1),$={class:"col-12 md:col-10"},g={key:0,class:"p-error text-left block pt-2"},v={class:"field grid"},C=(0,s._)("label",{for:"email",class:"col-10 mb-2 md:col-2 md:mb-0 font-semibold"},"Email khách hàng: ",-1),b={class:"col-12 md:col-10"},k={key:0,class:"p-error text-left block pt-2"},y={class:"field grid pb-4"},f=(0,s._)("label",{for:"text",class:"col-10 mb-2 md:col-2 md:mb-0 font-semibold"},"Tên công ty khách hàng: ",-1),_={class:"col-12 md:col-10"},V={key:0,class:"p-error text-left block pt-2"},x={class:"col-12"};function L(e,t,a,L,w,j){const P=(0,s.up)("HeaderComponent"),q=(0,s.up)("InputText"),S=(0,s.up)("Button"),T=(0,s.up)("Panel");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(P),(0,s._)("div",i,[(0,s._)("div",m,[(0,s.Wm)(T,{header:"Tạo khảo sát",class:"mt-4 box"},{default:(0,s.w5)((()=>[(0,s._)("form",{onSubmit:t[5]||(t[5]=(0,l.iM)((t=>j.handleSubmit(!e.v$.$invalid)),["prevent"]))},[(0,s._)("div",r,[u,(0,s._)("div",d,[(0,s.Wm)(q,{id:"name-project",placeholder:"Nhập tên dự án....",type:"text",class:(0,o.C_)(["p-inputtext-lg w-full",{"p-invalid":e.v$.nameProject.$invalid&&w.submitted}]),modelValue:e.v$.nameProject.$model,"onUpdate:modelValue":t[0]||(t[0]=t=>e.v$.nameProject.$model=t),disabled:w.isLoading},null,8,["modelValue","class","disabled"]),e.v$.nameProject.$invalid&&w.submitted||e.v$.nameProject.$pending.$response?((0,s.wg)(),(0,s.iD)("small",c,(0,o.zw)(e.v$.nameProject.required.$message.replace("Value","nameProject")),1)):(0,s.kq)("",!0)])]),(0,s._)("div",p,[h,(0,s._)("div",$,[(0,s.Wm)(q,{id:"name-customer",placeholder:"Nhập tên khách hàng....",type:"text",class:(0,o.C_)(["p-inputtext-lg w-full",{"p-invalid":e.v$.nameCustomer.$invalid&&w.submitted}]),modelValue:e.v$.nameCustomer.$model,"onUpdate:modelValue":t[1]||(t[1]=t=>e.v$.nameCustomer.$model=t),disabled:w.isLoading},null,8,["modelValue","class","disabled"]),e.v$.nameCustomer.$invalid&&w.submitted||e.v$.nameCustomer.$pending.$response?((0,s.wg)(),(0,s.iD)("small",g,(0,o.zw)(e.v$.nameCustomer.required.$message.replace("Value","nameCustomer")),1)):(0,s.kq)("",!0)])]),(0,s._)("div",v,[C,(0,s._)("div",b,[(0,s.Wm)(q,{id:"email",placeholder:"Nhập email khách hàng....",type:"text",class:(0,o.C_)(["p-inputtext-lg w-full",{"p-invalid":e.v$.emailCustomer.$invalid&&w.submitted}]),modelValue:e.v$.emailCustomer.$model,"onUpdate:modelValue":t[2]||(t[2]=t=>e.v$.emailCustomer.$model=t),disabled:w.isLoading},null,8,["modelValue","class","disabled"]),e.v$.emailCustomer.$invalid&&w.submitted||e.v$.emailCustomer.$pending.$response?((0,s.wg)(),(0,s.iD)("small",k,(0,o.zw)(e.v$.emailCustomer.required.$message.replace("Value","emailCustomer")),1)):(0,s.kq)("",!0)])]),(0,s._)("div",y,[f,(0,s._)("div",_,[(0,s.Wm)(q,{id:"text",placeholder:"Nhập tên công ty khách hàng....",type:"text",class:(0,o.C_)(["p-inputtext-lg w-full",{"p-invalid":e.v$.nameCompanyCustomer.$invalid&&w.submitted}]),modelValue:e.v$.nameCompanyCustomer.$model,"onUpdate:modelValue":t[3]||(t[3]=t=>e.v$.nameCompanyCustomer.$model=t),disabled:w.isLoading},null,8,["modelValue","class","disabled"]),e.v$.nameCompanyCustomer.$invalid&&w.submitted||e.v$.nameCompanyCustomer.$pending.$response?((0,s.wg)(),(0,s.iD)("small",V,(0,o.zw)(e.v$.nameCompanyCustomer.required.$message.replace("Value","nameCompanyCustomer")),1)):(0,s.kq)("",!0)])]),(0,s._)("div",x,[(0,s.Wm)(S,{type:"submit",label:"Tạo khảo sát",class:"btn-primary btn-login text-white font-bold pt-3 pb-3 pl-8 pr-8 border-round-lg",loading:w.isLoading,onClick:t[4]||(t[4]=e=>j.handleSubmit())},null,8,["loading"])])],32)])),_:1})])])])}a(7658);var w=a(3053),j=a(9117),P=a(5074),q={inject:["headerSetting","urlAPI","keyEncrypt"],name:"InputForm",components:{HeaderComponent:P.Z},setup:()=>({v$:(0,w.Xw)()}),data(){return{submitted:!1,isLoading:!1}},validations(){return{nameProject:{required:j.C1},nameCustomer:{required:j.C1},nameCompanyCustomer:{required:j.C1},emailCustomer:{required:j.C1}}},methods:{async handleSubmit(e){this.submitted=!0,e&&this.createLinkSurvey()},getFormSurvey(){let e={mode:"cxlandingClick",username:this.username,data:{projectName:this.nameProject,customerName:this.nameCustomer,customerEmail:this.emailCustomer,companyName:this.nameCompanyCustomer,internalLink:this.linkInternal,customerLink:this.linkCustomer}},t=this;t.axios.post(t.urlAPI,e,t.headerSetting).then((function(e){200==e.status&&(t.$toast.add({severity:"success",summary:"Thông báo",detail:"Tạo form khảo sát thành công !",life:3e3}),t.$router.push({path:"form-get-link"}))})).catch((e=>{t.$toast.add({severity:"error",summary:"Thông báo",detail:"Lỗi:  !"+e,life:3e3})})).finally((()=>{t.isLoading=!1}))},async createLinkSurvey(){this.isLoading=!0;let e=(new Date).getTime();this.linkInternal="survey-internal/"+e,this.linkCustomer="survey-customer/"+e;let t=this;t.checkValidLogin().then((function(e){1==e.status&&t.getFormSurvey()})).catch((e=>{t.$toast.add({severity:"error",summary:"Thông báo",detail:"Lỗi:  !"+e,life:3e3})}))},checkValidLogin(){let e={mode:"cxlandingLogin",token:this.tokenLogin},t=this.axios.post(this.urlAPI,e,this.headerSetting);return t.then((e=>e.data))}},computed:{username:{get(){return this.$store.state.username},set(e){this.$store.commit("setValue",{action:"username",value:e})}},nameProject:{get(){return this.$store.state.nameProject},set(e){this.$store.commit("setValue",{action:"nameProject",value:e})}},nameCustomer:{get(){return this.$store.state.nameCustomer},set(e){this.$store.commit("setValue",{action:"nameCustomer",value:e})}},nameCompanyCustomer:{get(){return this.$store.state.nameCompanyCustomer},set(e){this.$store.commit("setValue",{action:"nameCompanyCustomer",value:e})}},emailCustomer:{get(){return this.$store.state.emailCustomer},set(e){this.$store.commit("setValue",{action:"emailCustomer",value:e})}},linkInternal:{get(){return this.$store.state.linkInternal},set(e){this.$store.commit("setValue",{action:"linkInternal",value:e})}},linkCustomer:{get(){return this.$store.state.linkCustomer},set(e){this.$store.commit("setValue",{action:"linkCustomer",value:e})}},tokenLogin:{get(){return this.$store.state.tokenLogin},set(e){this.$store.commit("setValue",{action:"tokenLogin",value:e})}}}},S=a(89);const T=(0,S.Z)(q,[["render",L]]);var I=T}}]);
//# sourceMappingURL=InputForm.d6c57b83.js.map